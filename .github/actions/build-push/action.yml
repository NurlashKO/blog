name: "Build And Push Docker Image"
inputs:
  microservice:
    required: true
  repoflow_pwd:
    required: true

runs:
  using: "composite"
  steps:
    -
      name: Login to GitHub Container Registry
      uses: docker/login-action@v3
      with:
        registry: api.repoflow.io
        username: nurlashko
        password: ${{ inputs.repoflow_pwd}}
    -
      name: Build And Push Docker Image
      shell: bash
      run: |
        docker build microservices/${{ inputs.microservice }} -t api.repoflow.io/zhnurlan96-5303/blog/${{ inputs.microservice }}:${{ github.run_number }}
        docker push api.repoflow.io/zhnurlan96-5303/blog/${{ inputs.microservice }}:${{ github.run_number }}